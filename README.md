# üîê ASP.NET Web API —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ ASP.NET Web API —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, WPF –∏ –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–∞–º–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **ASP.NET Web API 8.0** —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **WPF –∫–ª–∏–µ–Ω—Ç** –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–í–µ–±-–∫–ª–∏–µ–Ω—Ç** (HTML/CSS/JS) –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
- **MemoryCache** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- **–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å** (User/Admin)
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π logout** —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ç–æ–∫–µ–Ω–æ–≤
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞** (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
ASP.NET-API-Example/
‚îú‚îÄ‚îÄ ASP.NET-API/ # Backend API (C#)
‚îú‚îÄ‚îÄ WPF-Client/ # WPF desktop client (C#)
‚îú‚îÄ‚îÄ Web-Client/ # Web client (HTML/JS)
‚îî‚îÄ‚îÄ Tests/ # PowerShell —Ç–µ—Å—Ç—ã

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ API
```powershell
cd ASP.NET-API
dotnet run

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ: http://localhost:5261

–ó–∞–ø—É—Å—Ç–∏—Ç–µ PowerShell —Ç–µ—Å—Ç—ã:
.\Tests\api-tests.ps1
.\Tests\security-tests.ps1

üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
üîì –ü—É–±–ª–∏—á–Ω—ã–µ

    GET /api/public/info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ API

    GET /api/public/health - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

    POST /api/auth/login - –ü–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω

    POST /api/auth/logout - –í—ã–π—Ç–∏ (–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞)

    GET /api/auth/validate - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞

üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

    GET /api/data/user-info - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    GET /api/data/admin-data - –ê–¥–º–∏–Ω –¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ Admin)

    GET /api/data/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

PowerShell —Ç–µ—Å—Ç—ã:
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç API
.\Tests\api-tests.ps1

# –¢–µ—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
.\Tests\security-tests.ps1

# –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç
.\Tests\load-test.ps1

–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
# 1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
$body = '{"username":"user1","password":"password1"}' | ConvertFrom-Json | ConvertTo-Json
$resp = Invoke-RestMethod http://localhost:5261/api/auth/login -Method Post -Body $body

# 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
$headers = @{"Authorization"="Bearer $($resp.Token)";"User-Agent"="Test/1.0"}
Invoke-RestMethod http://localhost:5261/api/data/user-info -Headers $headers

# 3. –í—ã–π—Ç–∏
Invoke-RestMethod http://localhost:5261/api/auth/logout -Method Post -Headers $headers

üñ•Ô∏è –ö–ª–∏–µ–Ω—Ç—ã
WPF –∫–ª–∏–µ–Ω—Ç

    –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –¥–µ—Å–∫—Ç–æ–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

    –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏

    –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞

–í–µ–±-–∫–ª–∏–µ–Ω—Ç

    –ü—Ä–æ—Å—Ç–æ–π HTML/JS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

    –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ

    –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

    –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

    Backend: ASP.NET 8.0, JWT Bearer, MemoryCache

    WPF: .NET 8.0, System.Text.Json

    Web: Vanilla JavaScript, Fetch API

    –¢–µ—Å—Ç—ã: PowerShell, Invoke-RestMethod

üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

    JWT —Ç–æ–∫–µ–Ω—ã —Å –ø–æ–¥–ø–∏—Å—å—é SHA256

    –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫—ç—à–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

    –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF (CORS –ø–æ–ª–∏—Ç–∏–∫–∏)

    –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

    –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞